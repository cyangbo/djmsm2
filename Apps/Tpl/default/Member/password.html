<include file="Public:header" />
<script type="text/javascript">
    $(function(){
        
       $("#form1").ajaxForm({
            beforeSubmit:  checkForm, 
            success:  complete, 
            dataType: 'json'
        });
        function checkForm(){
            
            if( '' == $.trim($('#password').val())){
                alert('新密码不能为空');
                return false;
            }
            if( $.trim($('#repassword').val()) != $.trim($('#password').val())){
                alert('两次输入的新密码不一致');
                return false;
            }
        }
        function complete(data){
            alert(data.info);
        }
        
        
        
    });

</script>
<div class="memberbox">
    <div class="memberbox_inner">
        <div class="memberbox_left">
            <include file="Member:left" />
        </div>
        <div class="memberbox_main">
            <div class="member_nav">修改密码</div>
            <form method='post' id="form1" name="form1" action="{:U('Member/checkPassword')}">
                
                <table border="0" cellspacing="6" cellpadding="3">
                    <tbody>
                        <tr>
                            <th>旧密码：</th>
                            <td><input type="password" name="oldpassword" class="ipt4"></td>
                        </tr>
                     
                        <tr>
                            <th>新密码：</th>
                            <td><input type="password" name="password" id="password" class="ipt4"></td>
                        </tr>
                        <tr>
                            <th>确认新密码：</th>
                            <td><input type="password" name="repassword" id="repassword" class="ipt4"></td>
                        </tr>
                        <tr>
                            <th>验证码：</th>
                            <td>
                                <script type='text/javascript'>
                                    var YXM_PUBLIC_KEY = '{$YXM_PUBLIC_KEY}';
                                    var YXM_localsec_url = '{$YXM_localsec_url}';
                                    function YXM_local_check()
                                    {
                                        if(typeof(YinXiangMaDataString)!='undefined')return;
                                        YXM_oldtag = document.getElementById('YXM_script');
                                        var YXM_local=document.createElement('script');
                                        YXM_local.setAttribute("type","text/javascript");
                                        YXM_local.setAttribute("id","YXM_script");
                                        YXM_local.setAttribute("src",YXM_localsec_url+'yinxiangma.js?pk='+YXM_PUBLIC_KEY+'&v=YinXiangMa_PHPSDK_4.0');
                                        YXM_oldtag.parentNode.replaceChild(YXM_local,YXM_oldtag);  
                                    }
                                    setTimeout("YXM_local_check()",3000);
                                    document.write("<input type='hidden' id='YXM_here' /><script type='text/javascript' charset='gbk' id='YXM_script' src='http://api.yinxiangma.com/api3/yzm.yinxiangma.php?pk="+YXM_PUBLIC_KEY+"&v=YinXiangMaPHPSDK_4.0'><"+"/script>");
                                </script>
                            </td>
                        </tr>
                        <tr>
                            <th></th>
                            <td><input type="submit" value="修 改" id="submit" class="submit"></td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>
<div class="clear10"></div>
<include file="Public:footer" />